var X=Object.defineProperty,Y=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var et=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var G=(a,d,u)=>d in a?X(a,d,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[d]=u,q=(a,d)=>{for(var u in d||(d={}))et.call(d,u)&&G(a,u,d[u]);if(Z)for(var u of Z(d))nt.call(d,u)&&G(a,u,d[u]);return a},O=(a,d)=>Y(a,tt(d));import{f as st,s as V,g as U}from"./index.4168a773.js";var $=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function it(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var N={exports:{}},Q={exports:{}};(function(a,d){(function(u,f){a.exports=f()})($,function(){var u=u||function(f,D){var c;if(typeof window!="undefined"&&window.crypto&&(c=window.crypto),typeof self!="undefined"&&self.crypto&&(c=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(c=globalThis.crypto),!c&&typeof window!="undefined"&&window.msCrypto&&(c=window.msCrypto),!c&&typeof $!="undefined"&&$.crypto&&(c=$.crypto),!c&&typeof it=="function")try{c=require("crypto")}catch{}var B=function(){if(c){if(typeof c.getRandomValues=="function")try{return c.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof c.randomBytes=="function")try{return c.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function t(){}return function(o){var l;return t.prototype=o,l=new t,t.prototype=null,l}}(),m={},e=m.lib={},S=e.Base=function(){return{extend:function(t){var o=h(this);return t&&o.mixIn(t),(!o.hasOwnProperty("init")||this.init===o.init)&&(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var o in t)t.hasOwnProperty(o)&&(this[o]=t[o]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),y=e.WordArray=S.extend({init:function(t,o){t=this.words=t||[],o!=D?this.sigBytes=o:this.sigBytes=t.length*4},toString:function(t){return(t||w).stringify(this)},concat:function(t){var o=this.words,l=t.words,p=this.sigBytes,_=t.sigBytes;if(this.clamp(),p%4)for(var k=0;k<_;k++){var C=l[k>>>2]>>>24-k%4*8&255;o[p+k>>>2]|=C<<24-(p+k)%4*8}else for(var E=0;E<_;E+=4)o[p+E>>>2]=l[E>>>2];return this.sigBytes+=_,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=f.ceil(o/4)},clone:function(){var t=S.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var o=[],l=0;l<t;l+=4)o.push(B());return new y.init(o,t)}}),b=m.enc={},w=b.Hex={stringify:function(t){for(var o=t.words,l=t.sigBytes,p=[],_=0;_<l;_++){var k=o[_>>>2]>>>24-_%4*8&255;p.push((k>>>4).toString(16)),p.push((k&15).toString(16))}return p.join("")},parse:function(t){for(var o=t.length,l=[],p=0;p<o;p+=2)l[p>>>3]|=parseInt(t.substr(p,2),16)<<24-p%8*4;return new y.init(l,o/2)}},x=b.Latin1={stringify:function(t){for(var o=t.words,l=t.sigBytes,p=[],_=0;_<l;_++){var k=o[_>>>2]>>>24-_%4*8&255;p.push(String.fromCharCode(k))}return p.join("")},parse:function(t){for(var o=t.length,l=[],p=0;p<o;p++)l[p>>>2]|=(t.charCodeAt(p)&255)<<24-p%4*8;return new y.init(l,o)}},g=b.Utf8={stringify:function(t){try{return decodeURIComponent(escape(x.stringify(t)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(t){return x.parse(unescape(encodeURIComponent(t)))}},v=e.BufferedBlockAlgorithm=S.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(t){typeof t=="string"&&(t=g.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var o,l=this._data,p=l.words,_=l.sigBytes,k=this.blockSize,C=k*4,E=_/C;t?E=f.ceil(E):E=f.max((E|0)-this._minBufferSize,0);var I=E*k,A=f.min(I*4,_);if(I){for(var F=0;F<I;F+=k)this._doProcessBlock(p,F);o=p.splice(0,I),l.sigBytes-=A}return new y.init(o,A)},clone:function(){var t=S.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});e.Hasher=v.extend({cfg:S.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var o=this._doFinalize();return o},blockSize:16,_createHelper:function(t){return function(o,l){return new t.init(l).finalize(o)}},_createHmacHelper:function(t){return function(o,l){return new T.HMAC.init(t,l).finalize(o)}}});var T=m.algo={};return m}(Math);return u})})(Q);(function(a,d){(function(u,f){a.exports=f(Q.exports)})($,function(u){return function(f){var D=u,c=D.lib,B=c.WordArray,h=c.Hasher,m=D.algo,e=[];(function(){for(var g=0;g<64;g++)e[g]=f.abs(f.sin(g+1))*4294967296|0})();var S=m.MD5=h.extend({_doReset:function(){this._hash=new B.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,v){for(var T=0;T<16;T++){var t=v+T,o=g[t];g[t]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360}var l=this._hash.words,p=g[v+0],_=g[v+1],k=g[v+2],C=g[v+3],E=g[v+4],I=g[v+5],A=g[v+6],F=g[v+7],z=g[v+8],R=g[v+9],H=g[v+10],j=g[v+11],M=g[v+12],P=g[v+13],W=g[v+14],L=g[v+15],n=l[0],s=l[1],i=l[2],r=l[3];n=y(n,s,i,r,p,7,e[0]),r=y(r,n,s,i,_,12,e[1]),i=y(i,r,n,s,k,17,e[2]),s=y(s,i,r,n,C,22,e[3]),n=y(n,s,i,r,E,7,e[4]),r=y(r,n,s,i,I,12,e[5]),i=y(i,r,n,s,A,17,e[6]),s=y(s,i,r,n,F,22,e[7]),n=y(n,s,i,r,z,7,e[8]),r=y(r,n,s,i,R,12,e[9]),i=y(i,r,n,s,H,17,e[10]),s=y(s,i,r,n,j,22,e[11]),n=y(n,s,i,r,M,7,e[12]),r=y(r,n,s,i,P,12,e[13]),i=y(i,r,n,s,W,17,e[14]),s=y(s,i,r,n,L,22,e[15]),n=b(n,s,i,r,_,5,e[16]),r=b(r,n,s,i,A,9,e[17]),i=b(i,r,n,s,j,14,e[18]),s=b(s,i,r,n,p,20,e[19]),n=b(n,s,i,r,I,5,e[20]),r=b(r,n,s,i,H,9,e[21]),i=b(i,r,n,s,L,14,e[22]),s=b(s,i,r,n,E,20,e[23]),n=b(n,s,i,r,R,5,e[24]),r=b(r,n,s,i,W,9,e[25]),i=b(i,r,n,s,C,14,e[26]),s=b(s,i,r,n,z,20,e[27]),n=b(n,s,i,r,P,5,e[28]),r=b(r,n,s,i,k,9,e[29]),i=b(i,r,n,s,F,14,e[30]),s=b(s,i,r,n,M,20,e[31]),n=w(n,s,i,r,I,4,e[32]),r=w(r,n,s,i,z,11,e[33]),i=w(i,r,n,s,j,16,e[34]),s=w(s,i,r,n,W,23,e[35]),n=w(n,s,i,r,_,4,e[36]),r=w(r,n,s,i,E,11,e[37]),i=w(i,r,n,s,F,16,e[38]),s=w(s,i,r,n,H,23,e[39]),n=w(n,s,i,r,P,4,e[40]),r=w(r,n,s,i,p,11,e[41]),i=w(i,r,n,s,C,16,e[42]),s=w(s,i,r,n,A,23,e[43]),n=w(n,s,i,r,R,4,e[44]),r=w(r,n,s,i,M,11,e[45]),i=w(i,r,n,s,L,16,e[46]),s=w(s,i,r,n,k,23,e[47]),n=x(n,s,i,r,p,6,e[48]),r=x(r,n,s,i,F,10,e[49]),i=x(i,r,n,s,W,15,e[50]),s=x(s,i,r,n,I,21,e[51]),n=x(n,s,i,r,M,6,e[52]),r=x(r,n,s,i,C,10,e[53]),i=x(i,r,n,s,H,15,e[54]),s=x(s,i,r,n,_,21,e[55]),n=x(n,s,i,r,z,6,e[56]),r=x(r,n,s,i,L,10,e[57]),i=x(i,r,n,s,A,15,e[58]),s=x(s,i,r,n,P,21,e[59]),n=x(n,s,i,r,E,6,e[60]),r=x(r,n,s,i,j,10,e[61]),i=x(i,r,n,s,k,15,e[62]),s=x(s,i,r,n,R,21,e[63]),l[0]=l[0]+n|0,l[1]=l[1]+s|0,l[2]=l[2]+i|0,l[3]=l[3]+r|0},_doFinalize:function(){var g=this._data,v=g.words,T=this._nDataBytes*8,t=g.sigBytes*8;v[t>>>5]|=128<<24-t%32;var o=f.floor(T/4294967296),l=T;v[(t+64>>>9<<4)+15]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,v[(t+64>>>9<<4)+14]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360,g.sigBytes=(v.length+1)*4,this._process();for(var p=this._hash,_=p.words,k=0;k<4;k++){var C=_[k];_[k]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}return p},clone:function(){var g=h.clone.call(this);return g._hash=this._hash.clone(),g}});function y(g,v,T,t,o,l,p){var _=g+(v&T|~v&t)+o+p;return(_<<l|_>>>32-l)+v}function b(g,v,T,t,o,l,p){var _=g+(v&t|T&~t)+o+p;return(_<<l|_>>>32-l)+v}function w(g,v,T,t,o,l,p){var _=g+(v^T^t)+o+p;return(_<<l|_>>>32-l)+v}function x(g,v,T,t,o,l,p){var _=g+(T^(v|~t))+o+p;return(_<<l|_>>>32-l)+v}D.MD5=h._createHelper(S),D.HmacMD5=h._createHmacHelper(S)}(Math),u.MD5})})(N);var rt=N.exports;const J="db5",ut={operations:[],timeMove:"",timeCars:"",timeIdle:""};function ot(a,d){const u=d>>>3,f=d&7;return a[u]&1<<f?1:0}function K(a,d,u){let f=0;for(let D=0;D<u;D++)f|=ot(a,d+D)<<D;return f}const ct=st({id:"mainStore",state:()=>({time:{system:new Date,delta:5*6e4},color:"green",mals:{engine:"\u2014",radio:0,control:!1,nocontrolSwitch:!1,vagonControl:!1,workplace:!1,malfunction:!1,dspstop:!1,soststop:!1,braking:!1},field:V({hash:"",states:"",statesBuffer:new Uint8Array}),in:{type:"\u2014",control:!1,reversor:0,pk:0,kv:0,epk:!1,diesel:!1,rb:!1,boks:!1},sensors:{di_run:0,di_v:0,di_a:0,dd_cyl:0,dd_mag:0,dd_urv:0,dt:0},route:{zones:[],bu:[],headDst:0,headSrc:0},model:V({id:{},lights:{items:[]},hash:""}),process:ut,buttons:{cruise:!1,pull:!1},plan:{id:"",open:0,operationID:null,stageID:null,operations:[]},windows:{engines:!1,call:!1},engines:[]}),getters:{getDirection(){return this.sensors.di_v!==0?this.sensors.di_v>0:this.in.reversor>=0},getSpeed(){if(this.route.zones.length>1){const a=this.getDirection?1:0;return{current:Math.round(Math.abs(this.sensors.di_v)),limit:Math.round(this.route.zones[a].vd),target:Math.round(this.route.zones[a].vt)}}return{current:0,limit:0,target:0}},getSignalColorByID:a=>d=>{let u="none";if(a.model.id[d]&&a.model.id){const{bits:f}=a.model.id[d];switch(K(a.field.statesBuffer,f[0],f[1])){case 0:u="blue";break;case 1:u="white";break;case 2:u="blue";break;case 3:u="blue";break;case 4:u="red";break;case 5:u="yellow";break;case 6:u="yellow";break;case 7:u="green";break;default:u="blue"}}return u},getSignalColor(){if(this.route.zones.length>1){const a=this.getDirection?1:0;return this.getSignalColorByID(this.route.zones[a].lightid)}return"none"},getZone:a=>d=>{if(a.route.zones.length>1){const u=(()=>{var B,h;return a.route.zones[d].endtype==="light"?((B=a.model.id[a.route.zones[d].lightid])==null?void 0:B.name)||"?":a.route.zones[d].endtype==="section"&&((h=a.model.id[a.route.zones[d].lastbuid])==null?void 0:h.name)||"?"})();let f="\u2014";const D=a.route.zones[d].sd,c=Math.round(a.route.zones[d].vd);switch(a.route.zones[d].route){case"behind-light":f=`\u0437\u0430 ${u}`;break;case"before-light":f=`\u0434\u043E ${u}`;break;case"shunt-way":f=`\u043D\u0430 \u0437\u0430\u043D\u044F\u0442\u044B\u0439 ${u}`;break;case"deadend":f="\u0432 \u0442\u0443\u043F\u0438\u043A";break;case"free-way":f=`\u043D\u0430 \u043F\u0443\u0442\u044C ${u}`;break;case"span":f="\u043D\u0430 \u043F\u0435\u0440\u0435\u0433\u043E\u043D";break;case"away":f="\u0437\u0430 \u043F\u0440\u0435\u0434\u0435\u043B\u044B";break;case"mount-pull":f=`\u043F\u043E\u0434\u0442\u044F\u0433\u0438\u0432\u0430\u043D\u0438\u0435 ${u}`;break;case"mount-push":f=`\u043D\u0430\u0434\u0432\u0438\u0433 ${u}`;break;case"mount-sort":f=`\u0440\u043E\u0441\u043F\u0443\u0441\u043A ${u}`;break;case"mount-back":f=`\u043E\u0441\u0430\u0436\u0438\u0432\u0430\u043D\u0438\u0435 ${u}`;break;case"none":f="\u043D\u0435\u0442";break;default:f=a.route.zones[d].route}return{text:f,distance:D,limit:c}}return{text:"\u2014",distance:0,limit:0}},getZoneFront(){return this.getZone(1)},getZoneBack(){return this.getZone(0)},getTime(){const a=new Date(this.time.system.getTime()+this.time.delta);return`${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`}},actions:{updateTime(){this.time.system=new Date},openOperation(a){this.plan.open===a?this.plan.open=-1:this.plan.open=a},async fetchCycle(a){try{const{data:d}=await U.get(`/${J}/now?engines_version=2`),u=d.engines.find(c=>c.mals.engine==a);d.field.hash!==this.model.hash&&await this.fetchModel(),this.mals.engine=u.mals.engine,u.mals.radio.timeout<=3?this.mals.radio=4:u.mals.radio.timeout<=6?this.mals.radio=3:u.mals.radio.timeout<=9?this.mals.radio=2:u.mals.radio.timeout<=12?this.mals.radio=1:u.mals.radio.timeout<=15&&(this.mals.radio=0),this.mals.control=u.mals.control,this.mals.nocontrolSwitch=u.mals.nocontrol_switch,this.mals.vagonControl=u.mals.vagon_control,this.mals.workplace=u.mals.workplace,this.mals.malfunction=u.mals.malfunction,this.mals.dspstop=u.mals.dspstop,this.mals.soststop=u.mals.soststop,this.mals.braking=u.mals.braking||!1,this.field=O(q({},d.field),{statesBuffer:Uint8Array.from(window.atob(d.field.states),c=>c.charCodeAt(0))}),this.in=u.in,this.sensors=u.sensors,this.route.zones=u.route.zones,this.route.bu.splice(0,this.route.bu.length),this.route.headDst=0,this.route.headSrc=0;let f=null;if(u.route.rails.zone){for(let h=0;h<u.route.rails.zone.length;h++){const m=u.route.rails.zone[h],e=this.model.id[m],{buId:S}=e;let y="noControl";if(S){const{bits:b}=this.model.id[S],w=K(this.field.statesBuffer,b[0],b[1]),x=Boolean(w&1),g=Boolean((w&2)>>1),v=Boolean((w&4)>>2),T=Boolean((w&8)>>3);x?g?y="shunt":v?T?y="train-route":y="route":y="free":y="no-control"}if(S!==f&&this.route.bu.push({state:y,buId:S,length:0,headSrc:null,headDst:null,engine:null}),m===u.route.rails.head_dst[0]&&(this.route.bu[this.route.bu.length-1].headDst=u.route.rails.head_dst[1]+this.route.bu[this.route.bu.length-1].length),m===u.route.rails.head_src[0]&&(this.route.bu[this.route.bu.length-1].headSrc=u.route.rails.head_src[1]+this.route.bu[this.route.bu.length-1].length),m===u.position.railid&&(this.route.bu[this.route.bu.length-1].engine=u.position.raildist+this.route.bu[this.route.bu.length-1].length),this.route.bu[this.route.bu.length-1].length+=e.length,e.srcType==="\u0441\u0442\u044B\u043A"){const{srcId:b}=e,w=this.model.lights.items.find(x=>x.jointId===b&&x.railId===m);w&&(this.route.bu[this.route.bu.length-1].srcSignal=this.getSignalColorByID(w.id),this.route.bu[this.route.bu.length-1].srcName=w.name)}if(e.dstType==="\u0441\u0442\u044B\u043A"){const{dstId:b}=e,w=this.model.lights.items.find(x=>x.jointId===b&&x.railId===m);w&&(this.route.bu[this.route.bu.length-1].dstSignal=this.getSignalColorByID(w.id),this.route.bu[this.route.bu.length-1].dstName=w.name)}f=S}const c=this.route.bu.findIndex(h=>h.headSrc!==null);if(c>=0){const h=this.route.bu[c];this.route.headSrc=(c+h.headSrc/h.length)/this.route.bu.length*100}const B=this.route.bu.findIndex(h=>h.headDst!==null);if(B>=0){const h=this.route.bu[B];this.route.headDst=(B+h.headDst/h.length)/this.route.bu.length*100}}u.plan.plan_id!==null&&u.plan.plan_id!==this.plan.id&&await this.fetchPlan(a),this.plan.operationID=u.plan.oper_id,this.plan.stageID=u.plan.stage_id;let D=!0;for(let c=0;c<this.plan.operations.length;c++){const B=this.plan.operations[c];for(let h=0;h<B.stages.length;h++){const m=B.stages[h],e=new Date(m.times.start),S=new Date(m.times.end),y=new Date(this.time.system.getTime()+this.time.delta);if(this.plan.operationID===null||m.id===this.plan.stageID)if(D=!1,this.plan.operationID!==null){let b=(y.getTime()-e.getTime())/(S.getTime()-e.getTime());b>1&&(b=1),m.progress=b*100,B.progress=(h+b)/B.stages.length*100}else B.progress=0;if(y>e&&y<=S){let b=(y.getTime()-e.getTime())/(S.getTime()-e.getTime());b>1&&(b=1),m.progressPlan=b*100}else m.progressPlan=-1;if(m.id===this.plan.stageID&&S<y){const b=Math.round((y.getTime()-S.getTime())/1e3),w=b%60,x=Math.floor(b/60)%60,g=Math.floor(b/60/60)%24;x===0&&g===0?m.delta=`+ ${w} \u0441\u0435\u043A`:g===0?m.delta=`+ ${x} \u043C\u0438\u043D ${String(w).padStart(2,"0")} \u0441\u0435\u043A`:m.delta=`+ ${g} \u0447 ${String(x).padStart(2,"0")} \u0441\u0435\u043A`}else m.delta="";m.finished=D}B.finished=B.stages[B.stages.length-1].finished,B.finished&&(B.progress=100)}this.engines.splice(0,this.engines.length),d.engines.forEach(c=>{this.engines.push(c.mals.engine)})}catch(d){console.log(d)}},async fetchModel(){try{const a=["parks","points","joints","switches","bu","lights","rails"],{data:d}=await U.get(`/${J}/field/model`);d.hash=rt(JSON.stringify(d)).toString(),d.id={},a.forEach(u=>{d[u].items.forEach(f=>{d.id[f.id]=O(q({},f),{objectType:u})})}),this.model=d}catch(a){console.log(a)}},async fetchPlan(a){var d,u;try{const{data:f}=await U.get(`/db5/plan?engine=${a}`);for(let D=0;D<f.data.operations.length;D++){const c=f.data.operations[D];switch(c.type){case"arrival":c.text="\u041F\u0440\u0438\u0431\u044B\u0442\u0438\u0435";break;case"departure":c.text="\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435";break;case"cars_coupling":c.text="\u041F\u0440\u0438\u0446\u0435\u043F\u043A\u0430 \u0432\u0430\u0433\u043E\u043D\u043E\u0432";break;case"cars_uncoupling":c.text="\u041E\u0442\u0446\u0435\u043F\u043A\u0430 \u0432\u0430\u0433\u043E\u043D\u043E\u0432";break;case"engine_coupling":c.text="\u041F\u0440\u0438\u0446\u0435\u043F\u043A\u0430 \u043B\u043E\u043A\u043E\u043C\u043E\u0442\u0438\u0432\u0430";break;case"engine_uncoupling":c.text="\u041E\u0442\u0446\u0435\u043F\u043A\u0430 \u043B\u043E\u043A\u043E\u043C\u043E\u0442\u0438\u0432\u0430";break;case"forming":c.text="\u0424\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435";break;case"splitting":c.text=`\u0420\u0430\u0441\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u043E\u0441\u0442\u0430\u0432\u0430 c \u043F\u0443\u0442\u0438 ${c.wayFrom} \u043F\u0430\u0440\u043A\u0430 ${c.yardFrom} \u0432 \u043F\u0430\u0440\u043A ${c.yardWhere}`;break;case"feeding":c.text="\u041F\u043E\u0434\u0430\u0447\u0430";break;case"picking":c.text="\u0423\u0431\u043E\u0440\u043A\u0430";break;case"placement":c.text="\u0412\u044B\u0441\u0442\u0430\u0432\u043A\u0430";break;case"relocation":c.text="\u041F\u0435\u0440\u0435\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430";break;default:c.text=c.type}for(let B=0;B<c.stages.length;B++){const h=c.stages[B];switch(h.type){case"coupling":h.text="\u0421\u0446\u0435\u043F\u043A\u0430";break;case"uncoupling":h.text="\u041E\u0442\u0446\u0435\u043F\u043A\u0430";break;case"route":if(h.text="\u041C\u0430\u0440\u0448\u0440\u0443\u0442",(d=h.bu_id)!=null&&d.start){const m=this.model.id[h.bu_id.start];if(m.objectType==="bu")h.text+=` c ${m.name}`;else if(m.objectType==="rails"){const e=this.model.id[m.buId].name;h.text+=` c ${e}`}}if((u=h.bu_id)!=null&&u.end){const m=this.model.id[h.bu_id.end];if(m.objectType==="bu")h.text+=` \u043D\u0430 ${m.name}`;else if(m.objectType==="rails"){const e=this.model.id[m.buId].name;h.text+=` \u043D\u0430 ${e}`}}break;case"idle":h.text="\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435";break;case"pulling":h.text="\u041F\u043E\u0434\u0442\u044F\u0433\u0438\u0432\u0430\u043D\u0438\u0435";break;case"thrust":h.text="\u041D\u0430\u0434\u0432\u0438\u0433";break;case"dissolution":h.text="\u0420\u043E\u0441\u043F\u0443\u0441\u043A";break;default:h.text=h.type}if(h.route_type==="before_light"&&h.light_id){const m=this.model.id[h.light_id];m&&m.name&&(h.text+=` \u0434\u043E ${m.name}`)}h.finished=!1}c.finished=!1}this.plan.id=f.data.id,this.plan.operations.splice(0,this.plan.operations),this.plan.operations=f.data.operations}catch(f){console.log(f)}},async fetchPlanInfo(){const{data:a}=await U.get("/db5/planinfo"),d=new Date(a.data.sysDate);this.time.delta=d.getTime()-this.time.system.getTime()}}});export{ct as u};
