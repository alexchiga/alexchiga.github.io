import{d as g,a,b as h,o as E,r as _,c as l,e as m,w as c,f as y,g as C,T as D,h as A,i as S,j as v,k as T}from"./vendor.de996508.js";const k=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const s of u)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function i(u){const s={};return u.integrity&&(s.integrity=u.integrity),u.referrerpolicy&&(s.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?s.credentials="include":u.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(u){if(u.ep)return;u.ep=!0;const s=i(u);fetch(u.href,s)}};k();const b="modulepreload",d={},w="/",n=function(t,i){return!i||i.length===0?t():Promise.all(i.map(o=>{if(o=`${w}${o}`,o in d)return;d[o]=!0;const u=o.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${s}`))return;const r=document.createElement("link");if(r.rel=u?"stylesheet":b,u||(r.as="script",r.crossOrigin=""),r.href=o,document.head.appendChild(r),u)return new Promise((p,f)=>{r.addEventListener("load",p),r.addEventListener("error",f)})})).then(()=>t())},F={tasks:[],timeMove:"",timeCars:"",timeIdle:""},P=g({id:"mainStore",state:()=>({time:"00:00",color:"green",mals:{engine:"-",radio:0,control:!1,nocontrolSwitch:!1,vagonControl:!1,workplace:!1,malfunction:!1,dspstop:!1,soststop:!1,braking:!1},in:{type:"-",control:!1,reversor:0,pk:0,kv:0,epk:!1,diesel:!1,rb:!1,boks:!1},sensors:{di_run:0,di_v:0,di_a:0,dd_cyl:0,dd_mag:0,dd_urv:0,dt:0},route:{zones:[{route:"free-way",lastbuid:null,headbuid:null,lightid:null,lightcolor:null,lightunforbid:!1,vagons:0,sd:0,vd:0,vt:0},{route:"free-way",lastbuid:null,headbuid:null,lightid:null,lightcolor:null,lightunforbid:!1,vagons:0,sd:0,vd:0,vt:0}]},process:F}),getters:{getDirection(){return this.sensors.di_v!==0?this.sensors.di_v>0:this.in.reversor>=0},getSpeed(){const e=this.getDirection?0:1;return{current:Math.round(Math.abs(this.sensors.di_v)),limit:Math.round(this.route.zones[e].vd),target:Math.round(this.route.zones[e].vt)}},getSignalColor(){const e=this.getDirection?0:1;return this.route.zones[e].lightcolor||"none"}},actions:{updateTime(){const e=new Date;this.time=`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},loadState(){const e={tasks:[{type:"placement",name:"\u0412\u044B\u0441\u0442\u0430\u0432\u043A\u0430 \u0441\u043E\u0441\u0442\u0430\u0432\u0430 545235",timeStart:"19:20:00",timeEnd:"19:24:50",timeTotal:"4 \u043C\u0438\u043D 50 \u0441\u0435\u043A",progress:70,progressCompleted:50,open:!0,stages:[{type:"route",name:"\u041C\u0430\u0440\u0448\u0440\u0443\u0442 \u0434\u043E \u041C12",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:100},{type:"coupling",name:"\u041F\u0440\u0438\u0446\u0435\u043F\u043A\u0430",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:100},{type:"shoe",name:"\u0417\u0430\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:100},{type:"idle",name:"\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:100},{type:"uncoupling",name:"\u041E\u0442\u0446\u0435\u043F\u043A\u0430",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:60},{type:"fence",name:"\u041E\u0433\u0440\u0430\u0436\u0434\u0435\u043D\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"unfence",name:"\u0421\u043D\u044F\u0442\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0}]},{type:"forming",name:"\u0424\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u043E\u0441\u0442\u0430\u0432\u0430 545235",timeStart:"19:20:00",timeEnd:"19:24:50",timeTotal:"4 \u043C\u0438\u043D 50 \u0441\u0435\u043A",progress:0,progressCompleted:0,open:!1,stages:[{type:"route",name:"\u041C\u0430\u0440\u0448\u0440\u0443\u0442 \u0434\u043E \u041C12",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"coupling",name:"\u041F\u0440\u0438\u0446\u0435\u043F\u043A\u0430",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"shoe",name:"\u0417\u0430\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"idle",name:"\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"uncoupling",name:"\u041E\u0442\u0446\u0435\u043F\u043A\u0430",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"fence",name:"\u041E\u0433\u0440\u0430\u0436\u0434\u0435\u043D\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"unfence",name:"\u0421\u043D\u044F\u0442\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0}]},{type:"feeding",name:"\u041F\u043E\u0434\u0430\u0447\u0430 \u0432\u0430\u0433\u043E\u043D\u0430 545235",timeStart:"19:20:00",timeEnd:"19:24:50",timeTotal:"4 \u043C\u0438\u043D 50 \u0441\u0435\u043A",progress:0,progressCompleted:0,open:!1,stages:[{type:"route",name:"\u041C\u0430\u0440\u0448\u0440\u0443\u0442 \u0434\u043E \u041C12",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"coupling",name:"\u041F\u0440\u0438\u0446\u0435\u043F\u043A\u0430",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"shoe",name:"\u0417\u0430\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"idle",name:"\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"uncoupling",name:"\u041E\u0442\u0446\u0435\u043F\u043A\u0430",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"fence",name:"\u041E\u0433\u0440\u0430\u0436\u0434\u0435\u043D\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0},{type:"unfence",name:"\u0421\u043D\u044F\u0442\u0438\u0435",timeStart:"19:20:00",timeEnd:"19:22:30",timeTotal:"2 \u043C\u0438\u043D 30 \u0441\u0435\u043A",progress:0}]}],timeMove:"6 \u0447 00 \u043C\u0438\u043D 00 \u0441\u0435\u043A",timeCars:"6 \u0447 00 \u043C\u0438\u043D 00 \u0441\u0435\u043A",timeIdle:"6 \u0447 00 \u043C\u0438\u043D 00 \u0441\u0435\u043A"};this.process=e},openTask(e){for(let t=0;t<this.process.tasks.length;t++)t!==e&&(this.process.tasks[t].open=!1);this.process.tasks[e].open=!this.process.tasks[e].open},async fetchCycle(){const{data:e}=await a.get("/db3/cycle/result");this.mals.engine=e.mals.engine,e.mals.radio.timeout<=3?this.mals.radio=4:e.mals.radio.timeout<=6?this.mals.radio=3:e.mals.radio.timeout<=9?this.mals.radio=2:e.mals.radio.timeout<=12?this.mals.radio=1:e.mals.radio.timeout<=15&&(this.mals.radio=0),this.mals.control=e.mals.control,this.mals.nocontrolSwitch=e.mals.nocontrol_switch,this.mals.vagonControl=e.mals.vagon_control,this.mals.workplace=e.mals.workplace,this.mals.malfunction=e.mals.malfunction,this.mals.dspstop=e.mals.dspstop,this.mals.soststop=e.mals.soststop,this.mals.braking=e.mals.braking,this.in=e.in,this.sensors=e.sensors,this.route=e.route}}});const L=h({setup(e){const t=P();return E(()=>{t.updateTime(),t.loadState(),t.fetchCycle(),setInterval(()=>{t.updateTime(),t.fetchCycle()},1e3)}),(i,o)=>{const u=_("router-view");return l(),m(u,null,{default:c(({Component:s})=>[y(D,{name:"slide"},{default:c(()=>[(l(),m(C(s)))]),_:2},1024)]),_:1})}}}),I=[{path:"/",name:"Home",component:()=>n(()=>import("./Home.347e4818.js"),["assets/Home.347e4818.js","assets/Home.41024b50.css","assets/vendor.de996508.js","assets/plugin-vue_export-helper.21dcd24c.js"])},{path:"/process",name:"Process",component:()=>n(()=>import("./Process.41bde352.js"),["assets/Process.41bde352.js","assets/Process.469ea609.css","assets/vendor.de996508.js","assets/plugin-vue_export-helper.21dcd24c.js"])}],O=A({history:S("/"),routes:I});n(()=>Promise.resolve({}),["assets/normalize.8181e29b.css"]);n(()=>Promise.resolve({}),["assets/PT-Root-UI.7020da3e.css"]);n(()=>Promise.resolve({}),["assets/MALS.2d75bb36.css"]);a.defaults.baseURL="http://dsihome.ru:8082/api/";v(L).use(T()).use(O).mount("#app");export{P as u};
